# Readme for FEM Teamwork

这是我们的有限元小组作业，小组成员：陈博远、汪小杨、石嘉木、郭锐冰、苏耘希。

## 更新说明

### 可视化 CBY

绘制了位移和网格。

``utils/Plot.py``中，还需要检查网格的绘制是否对所有单元类型有效，理论上Q4应该可以，H8要重新画。

## 输入文件示例 CBY

```txt
An_Example_Of_Bar_Element # 标题行
6   1   1   1 # NUMNP NUMEG NLCASE MODEX
# 下面读入节点信息，读NUMNP行
1   1   1   1   0   0   0 # 每行 NodeNumber bcode*3 XYZ*3 
2   0   1   1   1   0   0
3   0   1   1   2   0   0
4   0   1   1   3   0   0
5   0   1   1   4   0   0
6   0   1   1   5   0   0
# 下面读入载荷信息，读NLCASE行
1   1 # LL(荷载工况编号) NL(集中载荷数量)
# 对每一种工况，读入载荷具体情况，读NL行
6   1   1 # 作用的节点 作用的自由度号 载荷大小
# 从下面到结尾读入单元信息，重复NUMEG次
1   5   1   # 单元类型 _NUME单元数 _NUMMAT材料数
# 读入材料，读_NUMMAT行
1   1   1   # 材料编号 后面的根据单元类型而不同
# 读入单元，读_NUME行
1   1   2   1 # 单元编号 后面的根据单元类型而不同
2   2   3   1
3   3   4   1
4   4   5   1
5   5   6   1
```

注意：

- NUMEG是**单元组**的数量，每个单元组内必须是同一种单元类型。
- NLCASE是**工况**的数量，一个dat文件可以定义多种工况，每个工况下各自施加一组载荷
- 单元类型编号参考``element/ElementGroup.py``
- bcode 1 表示约束，0表示自由
- 定义载荷时，作用的自由度号123分别表示xyz。

### Bar单元

材料定义

```txt
1   1   1  # 组号, E, nu
```

单元

```txt
1 1 2 3 #  单元号, 节点1, 节点2, 材料组号
```

### T3单元 CBY

材料定义

```txt
1 2.1e5 0.3 1.0  ! Q4材料: 组号, E, nu, 厚度（选填）
```

单元

```txt
1 1 2 3 1 #  单元号, 节点1, 节点2, 节点3，材料组号
```

### Q4单元 已添加 KG

材料定义

```txt
1 2.1e5 0.3 1.0 1  ! Q4材料: 组号, E, nu, 厚度（选填）, plane_stress(1=是,0=否，选填)
```

单元定义

```txt
1 1 2 3 4 1  
Q4单元: 单元号, 节点1, 节点2, 节点3, 节点4, 材料组号
```

### H8单元 WXY

1.  **输入格式**:
    * **材料**: `组号 杨氏模量E 泊松比nu` (例如: `1 2.0e11 0.3`)。
    * **单元**: `单元号 节点1 节点2 节点3 节点4 节点5 节点6 节点7 节点8 材料组号` (例如: `1 1 2 3 4 5 6 7 8 1`)。

2.  **节点顺序 (关键)**:
    * 8个节点**必须**按特定顺序输入（底面逆时针，然后顶面对应逆时针排列）。
    * 错误顺序会导致计算错误（如雅可比行列式异常）和可视化错误。

3.  **可视化**:
    * H8单元网格绘制需特殊处理，不能直接沿用简单单元的逻辑。
    * 需根据8个节点定义12条边线以正确显示。

4.  **单元类型编号**:
    * 输入文件中的H8单元类型编号需与 `element/ElementGroup.py` 中定义一致 [cite: 1]。

5.  **单元质量**:
    * 避免严重扭曲的单元形状，以防雅可比行列式为零或负值导致计算失败。

6.  **代码兼容性**:
    * 确保 `CH8Material` 提供 `CH8` 单元所需的 `E` 和 `nu`。
    * 确保节点对象提供 `XYZ` 坐标和 `bcode` 边界条件。